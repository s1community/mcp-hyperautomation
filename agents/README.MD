# Agents

## What is an Agent?

Agents are the backbone of the **Interactive Security Orchestrator** architecture, each representing a collective of features related to the same domain (Detections, Intel Enrichment, Agent Management, Case Management, DataLake, etc.).

This means that **instead of building monolithic workflows**, which are good  for prototyping, but don't scale and are generally hard to main over longer periods of time, **we rely on a modular architecture** where each group of domain-specific capabilities is exposed by a single entity that we call Agent through a Webhook Endpoint.

Modular architectures happen to be the golden standard when building SOAR orchestrations, and Agents embody that paradigm in HA.


## Message Format Protocol
To ensure seamless integration between the MCP server and HA workflows, we use a standardised JSON protocol which defines the structure for both input and output messages sent to and generated by the agents:

#### Input Format (Client -> Agent)

```json
{
  "req_id": "generated_uuid",
  "action": "function_name", 
  "input": ["value1", "value2", {...}]
}
```

#### Output Format (Agent -> DB Agent)

```json
{
  "req_id": "generated_uuid",
  "action": "create_row",
  "input": [{
    "time_start": "timestamp_when_agent_started",
    "time_stop": "timestamp_when_agent_finished", 
    "req_id": "original_request_id",
    "action": "original_action_name",
    "data": {
      "key1": "value1",
      "key2": "value2"
    }
  }]
}
```

This standardised format enables both MCP-to-HA communication and inter-Agent message passing within workflows, with all Agent outputs being routed through the DB Agent for external storage due to the platform's unidirectional data flow constraints.

### Field Descriptions
#### Input Message

- `req_id`: Unique identifier generated using str(uuid.uuid4()) enabling correlation between requests and responses
- `action`: Specifies which capability/function within the Agent should be executed (e.g., list_alerts, add_note_to_alert, etc.)
- `input`: List of values (strings, integers, or dictionaries) containing the parameters required by the specified action

#### Output Message (to DB Agent)

- `time_start`: Timestamp captured when the agent began processing the request
- `time_stop`: Timestamp calculated when the agent completes processing (using DATETIME_NOW())
- `req_id`: Original request identifier for traceability
- `action`: Echo of the original action that was executed
- `data`: Dictionary containing the agent's output results (flexible structure with no constraints)


---
## Release Notes
## 2025-08-23 (mcp-hyperautomation v0.1)

### New Features

- First release of the MCP server for HyperAutomation
  - Four Active and One Passive Agents release:
    - [**Case Manager**](.agents/ASSETHANDLER_Agent/README.md)
    - **SDL**
    - **Asset Manager**
    - **VT**
    - **DB Manager**
  - Google Big Query is the default choice for temporarily storing Agents' results
 
### Improvements
- N/A
### Bugs
- N/A
---
